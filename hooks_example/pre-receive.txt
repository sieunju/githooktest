#!/bin/sh
# Protected branches ì„¤ì •

# ë³´í˜¸ëœ ë¸Œëœì¹˜ ëª©ë¡
protected_branches="main master develop release/"

while read oldrev newrev refname; do
    # ë¸Œëœì¹˜ëª… ì¶”ì¶œ
    branch=$(echo $refname | sed 's/refs\/heads\///')

    # ë³´í˜¸ëœ ë¸Œëœì¹˜ì¸ì§€ í™•ì¸
    for protected in $protected_branches; do
        case "$branch" in
            $protected*)
                echo "âŒ ERROR: Branch '$branch' is protected!"
                echo "ğŸ›¡ï¸  Protected branches: $protected_branches"
                echo "ğŸ’¡ Use pull request or contact admin"
                exit 1
                ;;
        esac
    done
done

echo "âœ… Push allowed"
exit 0